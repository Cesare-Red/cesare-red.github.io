<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gioco per Carmela - 26 Anni!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #d6c2ff 0%, #a88beb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        /* Stelle di sfondo */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(255, 255, 255, 0.92);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
            border: 3px solid #8a6bc9;
        }
        
        .header {
            background: linear-gradient(90deg, #8a6bc9, #b19cd9);
            padding: 20px;
            text-align: center;
            position: relative;
            border-bottom: 3px solid #6a4ca1;
        }
        
        .header h1 {
            color: white;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 5px;
        }
        
        .header h2 {
            color: #fffacd;
            font-size: 1.8rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .birthday-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .content {
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .password-screen, .main-menu, .quiz-screen, .character-screen, .joke-screen, .minigame-screen {
            width: 100%;
            text-align: center;
        }
        
        .hidden {
            display: none;
        }
        
        .password-form {
            margin: 20px 0;
        }
        
        .password-input {
            padding: 12px 20px;
            font-size: 1.2rem;
            border: 2px solid #8a6bc9;
            border-radius: 50px;
            width: 70%;
            margin-bottom: 15px;
            text-align: center;
            background-color: #f0e6ff;
        }
        
        .btn {
            background: linear-gradient(90deg, #8a6bc9, #b19cd9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            width: 100%;
            margin-top: 20px;
        }
        
        .menu-btn {
            height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .menu-btn::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }
        
        .menu-btn:hover::before {
            transform: translateX(100%);
        }
        
        .menu-btn:hover {
            transform: scale(1.05);
        }
        
        .menu-btn i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .btn-1 {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }
        
        .btn-2 {
            background: linear-gradient(135deg, #fd79a8, #e84393);
        }
        
        .btn-3 {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
        }
        
        .btn-4 {
            background: linear-gradient(135deg, #55efc4, #00b894);
        }
        
        .quiz-question, .character-question {
            font-size: 1.4rem;
            margin: 20px 0;
            color: #2d3436;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }
        
        .option-btn {
            background-color: #e6d7ff;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid #d6c2ff;
        }
        
        .option-btn:hover {
            background-color: #d6c2ff;
            transform: translateY(-2px);
        }
        
        .joke-text {
            font-size: 1.4rem;
            margin: 30px 0;
            padding: 20px;
            background-color: #f0e6ff;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 2px dashed #8a6bc9;
        }
        
        .minigame-container {
            width: 100%;
            height: 300px;
            background-color: #f0e6ff;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid #8a6bc9;
        }
        
        /* Stili per i diversi minigiochi */
        .target {
            width: 60px;
            height: 60px;
            background-color: #ff6b6b;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .memory-card {
            width: 80px;
            height: 80px;
            background-color: #8a6bc9;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            cursor: pointer;
            color: transparent;
            transition: all 0.3s ease;
        }
        
        .memory-card.flipped {
            background-color: #ffeaa7;
            color: #2d3436;
            transform: rotateY(180deg);
        }
        
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px auto;
            max-width: 360px;
        }
        
        .reaction-box {
            width: 100px;
            height: 100px;
            background-color: #ff6b6b;
            border-radius: 10px;
            position: absolute;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            color: white;
            font-weight: bold;
        }
        
        .whack-mole {
            width: 80px;
            height: 80px;
            background-color: #8B4513;
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .mole {
            width: 70px;
            height: 70px;
            background-color: #654321;
            border-radius: 50%;
            position: absolute;
            bottom: -60px;
            transition: bottom 0.3s;
        }
        
        .whack-mole.active .mole {
            bottom: 5px;
        }
        
        .score {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 15px 0;
            color: #2d3436;
        }
        
        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 15px 0;
            color: #e84393;
        }
        
        .result {
            font-size: 1.3rem;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .correct {
            background-color: #55efc4;
            color: #2d3436;
        }
        
        .wrong {
            background-color: #ff7675;
            color: white;
        }
        
        .character-hint {
            font-size: 1.2rem;
            margin: 10px 0;
            color: #636e72;
        }
        
        .hint-number {
            font-weight: bold;
            color: #e84393;
        }
        
        .back-btn {
            background-color: #636e72;
            margin-top: 20px;
        }
        
        .minigame-title {
            font-size: 1.5rem;
            margin: 10px 0;
            color: #6a4ca1;
        }
        
        @media (max-width: 600px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header h2 {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
            
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Stelle di sfondo -->
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <h1>GIOIA CARMELA</h1>
            <h2>Me funny!</h2>
            <div class="birthday-badge">26</div>
        </div>
        
        <div class="content">
            <!-- Schermata Password -->
            <div class="password-screen" id="passwordScreen">
                <h2>Inserisci la Password</h2>
                <form class="password-form" id="passwordForm">
                    <input type="password" class="password-input" id="passwordInput" placeholder="Digita la password...">
                    <button type="submit" class="btn">ACCEDI</button>
                </form>
                <p id="passwordError" style="color: red; margin-top: 10px;"></p>
            </div>
            
            <!-- Menu Principale -->
            <div class="main-menu hidden" id="mainMenu">
                <h2>Scegli un'attività!</h2>
                <div class="menu-grid">
                    <button class="menu-btn btn-1" id="quizBtn">
                        <i>🎬</i>
                        Indovina Serie/Film
                    </button>
                    <button class="menu-btn btn-2" id="characterBtn">
                        <i>👤</i>
                        Indovina il Personaggio
                    </button>
                    <button class="menu-btn btn-3" id="jokeBtn">
                        <i>😂</i>
                        Freddura
                    </button>
                    <button class="menu-btn btn-4" id="minigameBtn">
                        <i>🎮</i>
                        Minigame
                    </button>
                </div>
            </div>
            
            <!-- Quiz Serie/Film -->
            <div class="quiz-screen hidden" id="quizScreen">
                <h2>Indovina la Serie/Film</h2>
                <div class="quiz-question" id="quizQuestion"></div>
                <div class="options" id="quizOptions"></div>
                <div class="result hidden" id="quizResult"></div>
                <button class="btn back-btn" id="quizBack">TORNA AL MENU</button>
            </div>
            
            <!-- Indovina il Personaggio -->
            <div class="character-screen hidden" id="characterScreen">
                <h2>Indovina il Personaggio</h2>
                <div class="character-question" id="characterQuestion"></div>
                <div class="character-hint" id="characterHint1"></div>
                <div class="character-hint" id="characterHint2"></div>
                <div class="character-hint" id="characterHint3"></div>
                <input type="text" class="password-input" id="characterInput" placeholder="Chi è?">
                <button class="btn" id="characterSubmit">INDOVINA</button>
                <div class="result hidden" id="characterResult"></div>
                <button class="btn back-btn" id="characterBack">TORNA AL MENU</button>
            </div>
            
            <!-- Schermata Freddure -->
            <div class="joke-screen hidden" id="jokeScreen">
                <h2>Freddura Time!</h2>
                <div class="joke-text" id="jokeText"></div>
                <button class="btn" id="newJokeBtn">NUOVA FREDDURA</button>
                <button class="btn back-btn" id="jokeBack">TORNA AL MENU</button>
            </div>
            
            <!-- Minigame -->
            <div class="minigame-screen hidden" id="minigameScreen">
                <h2>Minigame</h2>
                <div class="minigame-title" id="minigameTitle"></div>
                <div class="score" id="minigameScore">Punteggio: 0</div>
                <div class="timer" id="minigameTimer">Tempo: 30s</div>
                <div class="minigame-container" id="minigameContainer"></div>
                <div id="minigameInstructions"></div>
                <button class="btn" id="minigameStart">INIZIA</button>
                <button class="btn back-btn" id="minigameBack">TORNA AL MENU</button>
            </div>
        </div>
    </div>

    <script>
        // Elementi DOM
        const passwordScreen = document.getElementById('passwordScreen');
        const mainMenu = document.getElementById('mainMenu');
        const quizScreen = document.getElementById('quizScreen');
        const characterScreen = document.getElementById('characterScreen');
        const jokeScreen = document.getElementById('jokeScreen');
        const minigameScreen = document.getElementById('minigameScreen');
        const starsContainer = document.getElementById('stars');
        
        const passwordForm = document.getElementById('passwordForm');
        const passwordInput = document.getElementById('passwordInput');
        const passwordError = document.getElementById('passwordError');
        
        const quizBtn = document.getElementById('quizBtn');
        const characterBtn = document.getElementById('characterBtn');
        const jokeBtn = document.getElementById('jokeBtn');
        const minigameBtn = document.getElementById('minigameBtn');
        
        const quizBack = document.getElementById('quizBack');
        const characterBack = document.getElementById('characterBack');
        const jokeBack = document.getElementById('jokeBack');
        const minigameBack = document.getElementById('minigameBack');
        
        // Quiz elementi
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const quizResult = document.getElementById('quizResult');
        
        // Personaggio elementi
        const characterQuestion = document.getElementById('characterQuestion');
        const characterHint1 = document.getElementById('characterHint1');
        const characterHint2 = document.getElementById('characterHint2');
        const characterHint3 = document.getElementById('characterHint3');
        const characterInput = document.getElementById('characterInput');
        const characterSubmit = document.getElementById('characterSubmit');
        const characterResult = document.getElementById('characterResult');
        
        // Freddura elementi
        const jokeText = document.getElementById('jokeText');
        const newJokeBtn = document.getElementById('newJokeBtn');
        
        // Minigame elementi
        const minigameTitle = document.getElementById('minigameTitle');
        const minigameScore = document.getElementById('minigameScore');
        const minigameTimer = document.getElementById('minigameTimer');
        const minigameContainer = document.getElementById('minigameContainer');
        const minigameInstructions = document.getElementById('minigameInstructions');
        const minigameStart = document.getElementById('minigameStart');
        
        // Variabili di gioco
        let currentCharacter = {};
        let currentMinigame = null;
        let minigameScoreValue = 0;
        let minigameTimeLeft = 30;
        let minigameInterval;
        let targetInterval;
        
        // Creazione delle stelle di sfondo
        function createStars() {
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                starsContainer.appendChild(star);
            }
        }
        
        // Dati per i quiz
        const tvShowsQuiz = [
            {
                question: "In quale serie un gruppo di ragazzi vive avventure soprannaturali a Hawkins?",
                options: ["Stranger Things", "The OA", "Dark", "Riverdale"],
                answer: "Stranger Things"
            },
            {
                question: "Quale serie segue le vicende dei membri della famiglia Roy nel mondo dei media?",
                options: ["Billions", "The Crown", "Succession", "The Morning Show"],
                answer: "Succession"
            },
            {
                question: "In quale serie medica il dottor House risolve casi medici complessi?",
                options: ["Grey's Anatomy", "The Good Doctor", "House", "Chicago Med"],
                answer: "House"
            },
            {
                question: "Quale serie racconta la storia di un insegnante di chimica che diventa uno spacciatore?",
                options: ["Narcos", "Ozark", "Breaking Bad", "Weeds"],
                answer: "Breaking Bad"
            }
        ];
        
        const characters = [
            {
                name: "Walter White",
                hints: [
                    "Insegna chimica in una scuola superiore",
                    "Crea un impero della droga con un ex studente",
                    "La sua serie si intitola 'Breaking Bad'"
                ]
            },
            {
                name: "Daenerys Targaryen",
                hints: [
                    "È conosciuta come la 'Madre dei Draghi'",
                    "Vuole riconquistare il Trono di Spade",
                    "La sua serie è 'Il Trono di Spade'"
                ]
            },
            {
                name: "Sheldon Cooper",
                hints: [
                    "È un fisico teorico estremamente intelligente ma socialmente impacciato",
                    "Vive con il suo amico Leonard",
                    "La sua serie è 'The Big Bang Theory'"
                ]
            },
            {
                name: "Michael Scott",
                hints: [
                    "È il manager regionale di una filiale della Dunder Mifflin",
                    "È noto per le sue battute imbarazzanti e il suo comportamento inappropriato",
                    "La sua serie è 'The Office'"
                ]
            }
        ];
        
        const jokes = [
            "Qual è la differenza tra un uovo e una donna? L'uovo dopo 10 minuti diventa duro.",
            "Perché le donne vivono più degli uomini? Perché non hanno moglie!",
            "Mia moglie mi ha lasciato perché sono ossessionato dal golf. Ma penso che stia esagerando. Solo ieri le ho mandato un messaggio: 'Cara, è l'ultima buca, torno a casa'.",
            "Mio nonno mi ha detto: 'Il matrimonio è come un deck di carte. All'inizio tutto quello che ti serve sono due cuori e un diamante. Col tempo, quello che vorresti sono un piccone e una pala.'",
            "Mia moglie mi ha chiesto di passare l'aspirapolvere. Ho detto: 'Ma non vedi che sto guardando la partita?' Lei ha risposto: 'Mi dispiace, non sapevo che fossi cieco.'",
            "La mia ex-moglie mi ha lasciato perché dicevo troppe battute sui terremoti. Ma non è colpa mia se tremo ogni volta che la vedo.",
            "Mia moglie mi ha detto: 'Se mi amassi, mi faresti saltare in aria.' Così l'ho accontentata. Ora è in cielo.",
            "Mio marito mi ha detto: 'Se muoio prima di te, ti risposeresti?' Ho risposto: 'Probabilmente no. È stata abbastanza dura sopportarti una volta.'",
            "Mia moglie mi ha chiesto: 'Cosa ne pensi del mio nuovo taglio di capelli?' Ho risposto: 'Penso che il parrucchiere ti odi.'",
            "Il mio matrimonio è come un software: dopo il primo anno, devi pagare per gli aggiornamenti."
        ];
        
        // Funzioni di navigazione
        function showScreen(screenToShow) {
            // Nascondi tutte le schermate
            passwordScreen.classList.add('hidden');
            mainMenu.classList.add('hidden');
            quizScreen.classList.add('hidden');
            characterScreen.classList.add('hidden');
            jokeScreen.classList.add('hidden');
            minigameScreen.classList.add('hidden');
            
            // Mostra la schermata richiesta
            screenToShow.classList.remove('hidden');
        }
        
        // Gestione Password
        passwordForm.addEventListener('submit', function(e) {
            e.preventDefault();
            if (passwordInput.value.toLowerCase() === 'carmela') {
                showScreen(mainMenu);
                passwordError.textContent = '';
            } else {
                passwordError.textContent = 'Password errata! Riprova.';
            }
            passwordInput.value = '';
        });
        
        // Navigazione Menu
        quizBtn.addEventListener('click', function() {
            startQuiz();
            showScreen(quizScreen);
        });
        
        characterBtn.addEventListener('click', function() {
            startCharacterGame();
            showScreen(characterScreen);
        });
        
        jokeBtn.addEventListener('click', function() {
            showRandomJoke();
            showScreen(jokeScreen);
        });
        
        minigameBtn.addEventListener('click', function() {
            selectRandomMinigame();
            showScreen(minigameScreen);
        });
        
        // Pulsanti Indietro
        quizBack.addEventListener('click', function() {
            showScreen(mainMenu);
        });
        
        characterBack.addEventListener('click', function() {
            showScreen(mainMenu);
        });
        
        jokeBack.addEventListener('click', function() {
            showScreen(mainMenu);
        });
        
        minigameBack.addEventListener('click', function() {
            resetMinigame();
            showScreen(mainMenu);
        });
        
        // Quiz Serie/Film
        function startQuiz() {
            // Scegli una domanda casuale
            const randomIndex = Math.floor(Math.random() * tvShowsQuiz.length);
            const currentQuiz = tvShowsQuiz[randomIndex];
            
            // Mostra la domanda
            quizQuestion.textContent = currentQuiz.question;
            
            // Pulisci le opzioni precedenti
            quizOptions.innerHTML = '';
            quizResult.classList.add('hidden');
            
            // Aggiungi le opzioni
            currentQuiz.options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option-btn');
                button.textContent = option;
                button.addEventListener('click', function() {
                    checkQuizAnswer(option, currentQuiz.answer);
                });
                quizOptions.appendChild(button);
            });
        }
        
        function checkQuizAnswer(selected, correct) {
            if (selected === correct) {
                quizResult.textContent = "CORRETTO! Bravo!";
                quizResult.classList.remove('hidden');
                quizResult.classList.remove('wrong');
                quizResult.classList.add('correct');
            } else {
                quizResult.textContent = `SBAGLIATO! La risposta corretta era: ${correct}`;
                quizResult.classList.remove('hidden');
                quizResult.classList.remove('correct');
                quizResult.classList.add('wrong');
            }
        }
        
        // Indovina il Personaggio
        function startCharacterGame() {
            // Scegli un personaggio casuale
            const randomIndex = Math.floor(Math.random() * characters.length);
            currentCharacter = characters[randomIndex];
            
            // Mostra gli indizi
            characterQuestion.textContent = "Chi è questo personaggio?";
            characterHint1.textContent = "";
            characterHint2.textContent = "";
            characterHint3.textContent = "";
            
            characterHint1.textContent = `Indizio 1: ${currentCharacter.hints[0]}`;
            
            // Pulisci il risultato precedente
            characterResult.classList.add('hidden');
            characterInput.value = '';
            
            // Imposta i timer per gli indizi successivi
            setTimeout(() => {
                characterHint2.textContent = `Indizio 2: ${currentCharacter.hints[1]}`;
            }, 10000);
            
            setTimeout(() => {
                characterHint3.textContent = `Indizio 3: ${currentCharacter.hints[2]}`;
            }, 20000);
        }
        
        characterSubmit.addEventListener('click', function() {
            checkCharacterAnswer();
        });
        
        characterInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkCharacterAnswer();
            }
        });
        
        function checkCharacterAnswer() {
            const userAnswer = characterInput.value.trim().toLowerCase();
            const correctAnswer = currentCharacter.name.toLowerCase();
            
            if (userAnswer === correctAnswer) {
                characterResult.textContent = "ESATTO! Bravo!";
                characterResult.classList.remove('hidden');
                characterResult.classList.remove('wrong');
                characterResult.classList.add('correct');
            } else {
                characterResult.textContent = `SBAGLIATO! Il personaggio era: ${currentCharacter.name}`;
                characterResult.classList.remove('hidden');
                characterResult.classList.remove('correct');
                characterResult.classList.add('wrong');
            }
        }
        
        // Freddure
        function showRandomJoke() {
            const randomIndex = Math.floor(Math.random() * jokes.length);
            jokeText.textContent = jokes[randomIndex];
        }
        
        newJokeBtn.addEventListener('click', showRandomJoke);
        
        // Minigame
        function selectRandomMinigame() {
            const minigames = [
                { name: "Clicca il Bersaglio", func: startTargetGame },
                { name: "Gioco di Memoria", func: startMemoryGame },
                { name: "Test di Reazione", func: startReactionGame },
                { name: "Colpisci la Talpa", func: startWhackAMoleGame }
            ];
            
            const randomIndex = Math.floor(Math.random() * minigames.length);
            currentMinigame = minigames[randomIndex];
            minigameTitle.textContent = currentMinigame.name;
        }
        
        function resetMinigame() {
            minigameScoreValue = 0;
            minigameTimeLeft = 30;
            minigameScore.textContent = "Punteggio: 0";
            minigameTimer.textContent = "Tempo: 30s";
            minigameContainer.innerHTML = '';
            minigameInstructions.innerHTML = '';
            clearInterval(minigameInterval);
            clearInterval(targetInterval);
            minigameStart.disabled = false;
        }
        
        minigameStart.addEventListener('click', function() {
            if (currentMinigame) {
                currentMinigame.func();
            }
        });
        
        // Minigioco 1: Clicca il Bersaglio
        function startTargetGame() {
            minigameStart.disabled = true;
            minigameScoreValue = 0;
            minigameTimeLeft = 30;
            minigameScore.textContent = "Punteggio: 0";
            minigameTimer.textContent = "Tempo: 30s";
            minigameContainer.innerHTML = '';
            minigameInstructions.textContent = "Clicca sui bersagli rossi per guadagnare punti!";
            
            // Crea il primo bersaglio
            createTarget();
            
            // Avvia il timer
            minigameInterval = setInterval(function() {
                minigameTimeLeft--;
                minigameTimer.textContent = `Tempo: ${minigameTimeLeft}s`;
                
                if (minigameTimeLeft <= 0) {
                    endMinigame();
                }
            }, 1000);
            
            // Crea nuovi bersagli ogni 1.5 secondi
            targetInterval = setInterval(createTarget, 1500);
        }
        
        function createTarget() {
            const target = document.createElement('div');
            target.classList.add('target');
            
            // Posizione casuale
            const containerWidth = minigameContainer.clientWidth;
            const containerHeight = minigameContainer.clientHeight;
            const targetSize = 60;
            
            const maxX = containerWidth - targetSize;
            const maxY = containerHeight - targetSize;
            
            const randomX = Math.floor(Math.random() * maxX);
            const randomY = Math.floor(Math.random() * maxY);
            
            target.style.left = `${randomX}px`;
            target.style.top = `${randomY}px`;
            
            // Aggiungi evento click
            target.addEventListener('click', function() {
                minigameScoreValue++;
                minigameScore.textContent = `Punteggio: ${minigameScoreValue}`;
                minigameContainer.removeChild(target);
            });
            
            minigameContainer.appendChild(target);
            
            // Rimuovi il bersaglio dopo 1.5 secondi se non viene cliccato
            setTimeout(function() {
                if (minigameContainer.contains(target)) {
                    minigameContainer.removeChild(target);
                }
            }, 1500);
        }
        
        // Minigioco 2: Gioco di Memoria
        function startMemoryGame() {
            minigameStart.disabled = true;
            minigameTimeLeft = 60;
            minigameScoreValue = 0;
            minigameScore.textContent = "Punteggio: 0";
            minigameTimer.textContent = "Tempo: 60s";
            minigameContainer.innerHTML = '';
            minigameInstructions.textContent = "Trova tutte le coppie di carte!";
            
            const symbols = ['🍕', '🍦', '🎮', '🎬', '👻', '🐱', '🚀', '🌈'];
            const cards = [...symbols, ...symbols];
            
            // Mescola le carte
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            
            // Crea la griglia di carte
            const grid = document.createElement('div');
            grid.classList.add('memory-grid');
            
            let flippedCards = [];
            let matchedPairs = 0;
            
            cards.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.classList.add('memory-card');
                card.dataset.symbol = symbol;
                card.dataset.index = index;
                
                card.addEventListener('click', function() {
                    if (flippedCards.length < 2 && !card.classList.contains('flipped') && !card.classList.contains('matched')) {
                        card.classList.add('flipped');
                        card.textContent = symbol;
                        flippedCards.push(card);
                        
                        if (flippedCards.length === 2) {
                            const [card1, card2] = flippedCards;
                            
                            if (card1.dataset.symbol === card2.dataset.symbol) {
                                // Coppia trovata
                                card1.classList.add('matched');
                                card2.classList.add('matched');
                                minigameScoreValue += 10;
                                minigameScore.textContent = `Punteggio: ${minigameScoreValue}`;
                                matchedPairs++;
                                
                                if (matchedPairs === symbols.length) {
                                    endMinigame();
                                }
                                
                                flippedCards = [];
                            } else {
                                // Non è una coppia, gira le carte dopo un secondo
                                setTimeout(() => {
                                    card1.classList.remove('flipped');
                                    card2.classList.remove('flipped');
                                    card1.textContent = '';
                                    card2.textContent = '';
                                    flippedCards = [];
                                }, 1000);
                            }
                        }
                    }
                });
                
                grid.appendChild(card);
            });
            
            minigameContainer.appendChild(grid);
            
            // Avvia il timer
            minigameInterval = setInterval(function() {
                minigameTimeLeft--;
                minigameTimer.textContent = `Tempo: ${minigameTimeLeft}s`;
                
                if (minigameTimeLeft <= 0 || matchedPairs === symbols.length) {
                    endMinigame();
                }
            }, 1000);
        }
        
        // Minigioco 3: Test di Reazione
        function startReactionGame() {
            minigameStart.disabled = true;
            minigameTimeLeft = 30;
            minigameScoreValue = 0;
            minigameScore.textContent = "Punteggio: 0";
            minigameTimer.textContent = "Tempo: 30s";
            minigameContainer.innerHTML = '';
            minigameInstructions.textContent = "Clicca sui quadrati rossi appena appaiono!";
            
            let boxInterval;
            
            // Funzione per creare un quadrato
            function createBox() {
                const box = document.createElement('div');
                box.classList.add('reaction-box');
                box.textContent = 'CLICCA!';
                
                // Posizione casuale
                const containerWidth = minigameContainer.clientWidth;
                const containerHeight = minigameContainer.clientHeight;
                const boxSize = 100;
                
                const maxX = containerWidth - boxSize;
                const maxY = containerHeight - boxSize;
                
                const randomX = Math.floor(Math.random() * maxX);
                const randomY = Math.floor(Math.random() * maxY);
                
                box.style.left = `${randomX}px`;
                box.style.top = `${randomY}px`;
                
                // Aggiungi evento click
                box.addEventListener('click', function() {
                    minigameScoreValue += 5;
                    minigameScore.textContent = `Punteggio: ${minigameScoreValue}`;
                    minigameContainer.removeChild(box);
                });
                
                minigameContainer.appendChild(box);
                
                // Rimuovi il quadrato dopo 1.5 secondi se non viene cliccato
                setTimeout(function() {
                    if (minigameContainer.contains(box)) {
                        minigameContainer.removeChild(box);
                    }
                }, 1500);
            }
            
            // Crea il primo quadrato
            createBox();
            
            // Crea nuovi quadrati ogni 1-2.5 secondi
            boxInterval = setInterval(createBox, 1000 + Math.random() * 1500);
            
            // Avvia il timer
            minigameInterval = setInterval(function() {
                minigameTimeLeft--;
                minigameTimer.textContent = `Tempo: ${minigameTimeLeft}s`;
                
                if (minigameTimeLeft <= 0) {
                    clearInterval(boxInterval);
                    endMinigame();
                }
            }, 1000);
        }
        
        // Minigioco 4: Colpisci la Talpa
        function startWhackAMoleGame() {
            minigameStart.disabled = true;
            minigameTimeLeft = 30;
            minigameScoreValue = 0;
            minigameScore.textContent = "Punteggio: 0";
            minigameTimer.textContent = "Tempo: 30s";
            minigameContainer.innerHTML = '';
            minigameInstructions.textContent = "Colpisci le talpe quando escono dalle tane!";
            
            // Crea le tane per le talpe
            const holes = [];
            for (let i = 0; i < 9; i++) {
                const hole = document.createElement('div');
                hole.classList.add('whack-mole');
                
                const mole = document.createElement('div');
                mole.classList.add('mole');
                hole.appendChild(mole);
                
                hole.addEventListener('click', function() {
                    if (hole.classList.contains('active')) {
                        hole.classList.remove('active');
                        minigameScoreValue += 5;
                        minigameScore.textContent = `Punteggio: ${minigameScoreValue}`;
                    }
                });
                
                minigameContainer.appendChild(hole);
                holes.push(hole);
            }
            
            // Posiziona le tane in una griglia 3x3
            holes.forEach((hole, index) => {
                const row = Math.floor(index / 3);
                const col = index % 3;
                
                hole.style.left = `${col * 100 + 50}px`;
                hole.style.top = `${row * 100 + 50}px`;
            });
            
            let moleInterval;
            
            // Funzione per far apparire una talpa casuale
            function showRandomMole() {
                // Nascondi tutte le talpe
                holes.forEach(hole => hole.classList.remove('active'));
                
                // Mostra una talpa casuale
                const randomIndex = Math.floor(Math.random() * holes.length);
                holes[randomIndex].classList.add('active');
                
                // Nascondi la talpa dopo un po'
                setTimeout(() => {
                    holes[randomIndex].classList.remove('active');
                }, 800);
            }
            
            // Mostra la prima talpa
            showRandomMole();
            
            // Mostra talpe ogni 1-1.5 secondi
            moleInterval = setInterval(showRandomMole, 1000 + Math.random() * 500);
            
            // Avvia il timer
            minigameInterval = setInterval(function() {
                minigameTimeLeft--;
                minigameTimer.textContent = `Tempo: ${minigameTimeLeft}s`;
                
                if (minigameTimeLeft <= 0) {
                    clearInterval(moleInterval);
                    endMinigame();
                }
            }, 1000);
        }
        
        function endMinigame() {
            clearInterval(minigameInterval);
            clearInterval(targetInterval);
            
            // Rimuovi tutti gli elementi del minigioco
            minigameContainer.innerHTML = '';
            
            // Mostra il risultato
            const resultMessage = document.createElement('div');
            resultMessage.classList.add('result');
            resultMessage.textContent = `Tempo scaduto! Punteggio finale: ${minigameScoreValue}`;
            
            if (minigameScoreValue >= 50) {
                resultMessage.classList.add('correct');
                resultMessage.textContent += " - ECCELLENTE!";
            } else if (minigameScoreValue >= 30) {
                resultMessage.textContent += " - BUONO!";
            } else {
                resultMessage.classList.add('wrong');
                resultMessage.textContent += " - PUOI FARE DI MEGLIO!";
            }
            
            minigameContainer.appendChild(resultMessage);
            minigameStart.disabled = false;
        }
        
        // Inizializzazione
        createStars();
    </script>
</body>
</html>